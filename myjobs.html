<!DOCTYPE HTML>
<html><!-- InstanceBegin template="/Templates/main.dwt" codeOutsideHTMLIsLocked="false" -->
    <head>
        <title>Mobile App</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<!-- FontAwesome - http://fortawesome.github.io/Font-Awesome/ -->
        <link rel="stylesheet" href="css/font-awesome.min.css" />
		<!-- jQueryMobileCSS - original without styling -->
        <link rel="stylesheet" href="css/jquerymobile.css" />
		<!-- nativeDroid core CSS -->
        <link rel="stylesheet" href="css/jquerymobile.nativedroid.css" />
		<!-- nativeDroid: Light/Dark -->
        <link rel="stylesheet" href="css/jquerymobile.nativedroid.dark.css"  id='jQMnDTheme' />
		<!-- nativeDroid: Color Schemes -->
        <link rel="stylesheet" href="css/jquerymobile.nativedroid.color.green.css" id='jQMnDColor' />
		<!-- jQuery / jQueryMobile Scripts -->
        <link href="css/style.css" type="text/css" rel="stylesheet">
 		<!-- style link -->       
		<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.js"></script>
        
		<script src="js/logger.js"></script>
		<script src="cordova.js"></script>
		<script src="js/functions.js"></script>
        <script src="PushNotification.js"></script>
		<script src="js/app.reg.device.js"></script>
		<script type="text/javascript">
        	$(document).ready(function() {
         		allowAccess();
             	$(document).on( 'pagecreate','#page', function(event){
              		setUserToken();
             	});
				
				currentUser = getLocalStorage("User");
				
				params = { callback : 'callbackAllJobs', controller : 'Jobs', action : 'allJobs', data : [{ userId : currentUser.id }] };
				getAjaxData(params, 'callbackAllJobs');
        	});
			
	function callbackAllJobs(data) {
        if(data.success == true && data.data != null) {
		console.log(data.data);
			var counting = 0 ;
			$.each( data.data, function( key, value ) {
				//console.log(key + ': ' + value);
				$.each( data.data[key], function( keys, values ) {
					//console.log(keys + ': ' + values);
					//$('#dataShow').append("<li>"+values.options+"</li>");
					            
				$('#dataShow').append("<li><a href='#'><h2>From "+values.from_address+" TO "+values.to_address+"</h2><p>"+values.id+"</p><p class='ui-li-aside'><strong>6:24</strong>PM</p></a></li>");
				
				});
			});
			
			//console.log(JSON.parse(data.data)); 
			
			/*$.each(data.data, function(key, value) {
				$.each(data.data[key], function(keys, values){
					console.log(keys + ': ' + values);
				})
			});*/
			
			
			//$(data.data).each(function() {
				//var output = "<li>" + this.Job + "</li>";
				//console.log(this.Job);
				//$('#allJobsData').append(output);
			//});
	
        } else if (data.success == true && data.data == null ){
			//location.reload();
			//alert('No user found, give correct login info');
		}
    }
	
	/*Object.size = function(obj) {
			var size = 0, key;
			for (key in obj) {
				if (obj.hasOwnProperty(key)) size++;
			}
			return size;
	/};*/

		// Get the size of an object
		
        </script>
	<!-- InstanceBeginEditable name="EditableHead" -->
    <script src="js/jquery.geocomplete.js"></script>
	<!-- InstanceEndEditable --> 
    </head>
    <body>
        
    <div data-role="page" data-theme='b'>
		<header data-role="none">
			<div id="header-logo">
				<div class="tile-box"><a href="dashboard.html" rel="external"><img src="images/taxi-logo.png" alt="Get a Taxi App"></a></div>
			</div>
		<!-- InstanceBeginEditable name="EditableHeader" -->
	  
		<!-- InstanceEndEditable -->
		</header>
        
        <div id="content"> 
		<!-- InstanceBeginEditable name="EditableBody" -->
	  
      		<div class="get-quote-bg content-position">
              	<h2>My Jobs</h2>
				<div id="allJobsData">
		<ul data-role="listview" data-inset="false" data-icon="false" data-divider-theme="b" id="dataShow">
            <!-- <li data-role="list-divider">Friday, October 8, 2010 <span class="ui-li-count">2</span></li> -->
            <li>
				<a href="index.php">
					<img src="http://www.placehold.it/150x150">
					<h2>Stephen Weber</h2>
					<p>Hey Stephen, if you're available at 10am tomorrow, we've got a meeting with the jQuery team.</p>
					<p class="ui-li-aside"><strong>6:24</strong>PM</p>
				</a>
			</li>

				</div>
            </div>
			
		<!-- InstanceEndEditable -->
		<div style="clear:both"></div>
	</div>
	<footer data-role="footer" data-position="fixed">
		
    <!-- InstanceBeginEditable name="EditableFooter" -->
	
	<!-- InstanceEndEditable -->
	</footer>
	</div>
	</div>
</body>
<!-- InstanceEnd --></html>
