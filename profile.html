<!DOCTYPE HTML>
<html><!-- InstanceBegin template="/Templates/main.dwt" codeOutsideHTMLIsLocked="false" -->
    <head>
        <title>Mobile App</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<!-- FontAwesome - http://fortawesome.github.io/Font-Awesome/ -->
        <link rel="stylesheet" href="css/font-awesome.min.css" />
		<!-- jQueryMobileCSS - original without styling -->
        <link rel="stylesheet" href="css/jquerymobile.css" />
		<!-- nativeDroid core CSS -->
        <link rel="stylesheet" href="css/jquerymobile.nativedroid.css" />
		<!-- nativeDroid: Light/Dark -->
        <link rel="stylesheet" href="css/jquerymobile.nativedroid.dark.css"  id='jQMnDTheme' />
		<!-- nativeDroid: Color Schemes -->
        <link rel="stylesheet" href="css/jquerymobile.nativedroid.color.green.css" id='jQMnDColor' />
		<!-- jQuery / jQueryMobile Scripts -->
        <link href="css/style.css" type="text/css" rel="stylesheet">
 		<!-- style link -->       
		<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.js"></script>
        
		<script src="js/logger.js"></script>
		<script src="cordova.js"></script>
		<script src="js/functions.js"></script>
        <script src="PushNotification.js"></script>
		<script src="js/app.reg.device.js"></script>
		<script type="text/javascript">
        	$(document).on( 'pagecreate','#newpage', function(event){
         		allowAccess();
             	//$(document).on( 'pagecreate','#page', function(event){
              		setUserToken();
             	//});
				
				currentUser = getLocalStorage("User");
				
				params = { callback : 'callbackGetProfile', controller : 'Profiles', action : 'getProfile', data : [{ userId : currentUser.id }] };
				getAjaxData(params, 'callbackGetProfile');
        	});
        </script>
	<!-- InstanceBeginEditable name="EditableHead" -->
            <script type="text/javascript">

			
	function callbackGetProfile(data) {
        if(data.success == true && data.data != null) {
		
			console.log(data.data);
			
			$('#idUpdate').val(data.data.Profile.id);	
			/*$('#fullNameUpdate').val(data.data.Profile.full_name);	
			$('#fullAddressUpdate').val(data.data.Profile.address);
			$('#cityNameUpdate').val(data.data.Profile.city);
			$('#stateNameUpdate').val(data.data.Profile.state);
			$('#zipCodeUpdate').val(data.data.Profile.zip);
			$('#countryNameUpdate').val(data.data.Profile.country);
			$('#phoneNoUpdate').val(data.data.Profile.phone);*/
			
			
			$('#fullName').val(data.data.Profile.full_name);	
			$('#fullAddress').val(data.data.Profile.address);
			$('#cityName').val(data.data.Profile.city);
			$('#stateName').val(data.data.Profile.state);
			$('#zipCode').val(data.data.Profile.zip);
			$('#countryName').val(data.data.Profile.country);
			$('#phoneNo').val(data.data.Profile.phone);
			

			
        } else if (data.success == true && data.data == null ){
			//location.reload();
			//alert('No user found, give correct login info');
		}
    }
	
	function callbackProfileUpdate(data) {
        if(data.success == true && data.data != null) {
			//alert(data.message);
	
        } else if (data.success == true && data.data == null ){
			//location.reload();
			//alert('No user found, give correct login info');
		}
    }
			</script>
	<!-- InstanceEndEditable --> 
    </head>
    <body>
        
    <div data-role="page" data-theme='b' id="newpage">
		<header data-role="none">
			<div id="header-logo">
				<div class="tile-box"><a href="dashboard.html" rel="external"><img src="images/taxi-logo.png" alt="Get a Taxi App"></a></div>
			</div>
		<!-- InstanceBeginEditable name="EditableHeader" -->
	  
		<!-- InstanceEndEditable -->
		</header>
        
        <div id="content"> 
		<!-- InstanceBeginEditable name="EditableBody" -->

     <div class="my-profile-bg content-position">                   

		<h2>User Profile</h2>
                            
                            	<form method="post" action="" onsubmit="return submitForm(this)">
                                        <div class='input-container'>
                                                <div class="icon-ph"><i class="ui-icon-chevron-left"></i></div>
                                               <input class="custom-text" type="text" placeholder="Full Name" data-role="none" id="fullName" name="data[Profile][full_name]">
                                        </div>
                                        <div class='input-container'>
                                                <div class="icon-ph"><i class="ui-icon-chevron-left"></i></div>
                                               <input class="custom-text" type="text" placeholder="Address" data-role="none" id="fullAddress" name="data[Profile][address]">
                                        </div>
                                        <div class='input-container'>
                                                <div class="icon-ph"><i class="ui-icon-chevron-left"></i></div>
                                               <input class="custom-text" type="text" placeholder="City" data-role="none" id="cityName" name="data[Profile][city]">
                                        </div>
                                        <div class='input-container'>
                                                <div class="icon-ph"><i class="ui-icon-chevron-left"></i></div>
                                               <input class="custom-text" type="text" placeholder="State" data-role="none" id="stateName" name="data[Profile][state]" >
                                        </div>
                                        <div class='input-container'>
                                                <div class="icon-ph"><i class="ui-icon-chevron-left"></i></div>
                                               <input class="custom-text" type="text" placeholder="Zip" data-role="none" id="zipCode" name="data[Profile][zip]">
                                        </div>
                                        <div class='input-container'>
                                                <div class="icon-ph"><i class="ui-icon-chevron-left"></i></div>
                                               <input class="custom-text" type="text" placeholder="Country" data-role="none" id="countryName"name="data[Profile][country]">
                                        </div>
                                        <div class='input-container'>
                                                <div class="icon-ph"><i class="ui-icon-chevron-left"></i></div>
                                               <input class="custom-text" type="text" placeholder="Phone No" data-role="none" id="phoneNo" name="data[Profile][phone]">
                                        </div>                                        
										                                                                                                                        
                                        <input type="hidden" name='controller' value="Profiles"  />
										<input type="hidden" name='action' value="profileUpdate"  />	
										<input type="hidden" name='callback' value="callbackProfileUpdate" />
										<input type="hidden" id="idUpdate" value="" name="data[Profile][id]" />
										
										<div class='input-container'><button type="submit" class="login" data-role="none">update profile</button></div>
                                    
                                </form>
              </div>                                
                                
		<!-- InstanceEndEditable -->
		<div style="clear:both"></div>
	</div>
	<footer data-role="footer" data-position="fixed">
		
    <!-- InstanceBeginEditable name="EditableFooter" -->
	
	<!-- InstanceEndEditable -->
	</footer>
	</div>
	</div>
</body>
<!-- InstanceEnd --></html>
